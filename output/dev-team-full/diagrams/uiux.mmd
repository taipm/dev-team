%% UI/UX State Diagram - CLI Interaction States
%% Generated by Diagram Team - Session DTT-2026-01-04-DIAGRAM-002

stateDiagram-v2
    [*] --> Idle

    Idle --> CommandParsing: User_types_command

    CommandParsing --> ParseError: Invalid syntax
    ParseError --> Idle: Error message

    CommandParsing --> SkillLoading: Valid command

    SkillLoading --> LoadError: Missing skill definition
    LoadError --> Idle: Reload command

    SkillLoading --> TeamActivation: Skill loaded

    TeamActivation --> BannerDisplay: Initialize session
    BannerDisplay --> SessionCreated: Session ID generated

    SessionCreated --> Exploration: Start Phase 1

    state Exploration {
        [*] --> ScanDir: Scan directory structure
        ScanDir --> DetectStack: Detect tech stack
        DetectStack --> MapComponents: Map components
        MapComponents --> ExtractRels: Extract relationships
        ExtractRels --> GenExplReport: Generate exploration-report.md
        GenExplReport --> [*]: exploration_complete signal
    }

    Exploration --> Generation: exploration_complete

    state Generation {
        [*] --> ParallelStart: Activate 7 diagrammers

        ParallelStart --> ArchGen: Architecture
        ParallelStart --> SeqGen: Sequence
        ParallelStart --> ClassGen: Class
        ParallelStart --> ErdGen: ERD
        ParallelStart --> DirGen: Directory
        ParallelStart --> LogicGen: Logic Flow
        ParallelStart --> UIGen: UI/UX

        ArchGen --> SyncPoint
        SeqGen --> SyncPoint
        ClassGen --> SyncPoint
        ErdGen --> SyncPoint
        DirGen --> SyncPoint
        LogicGen --> SyncPoint
        UIGen --> SyncPoint

        SyncPoint --> GenComplete: all_diagrams_ready
        GenComplete --> [*]
    }

    Generation --> Verification: all_diagrams_ready

    state Verification {
        [*] --> CheckEntities: entity_exists check
        CheckEntities --> CheckRels: relationship_valid check
        CheckRels --> CheckComplete: completeness check
        CheckComplete --> CheckNames: naming_match check
        CheckNames --> GenVerifReport: Generate verification-report.md
        GenVerifReport --> [*]: verification_complete signal
    }

    Verification --> Results: verification_complete

    state Results {
        [*] --> Aggregate: Collect all outputs
        Aggregate --> GenREADME: Generate README.md
        GenREADME --> GenSummary: Generate session-summary.md
        GenSummary --> DisplayResults: Display results
        DisplayResults --> [*]
    }

    Results --> Complete: Output folder prepared

    Complete --> SessionArchive: Archive session
    SessionArchive --> [*]

    Idle --> Idle: User idle
