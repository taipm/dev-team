%% Logic Flowchart - Execution Flow
%% Generated by Diagram Team - Session DTT-2026-01-04-DIAGRAM-001

flowchart TD
    subgraph Entry["Entry Point"]
        A[User invokes slash command]
    end

    subgraph Detection["Type Detection"]
        B{Team or Agent?}
    end

    subgraph TeamFlow["Team Workflow"]
        C[Load workflow.md]
        D[Initialize Session]
        E[Generate Session ID]
        F{Parallel Execution<br/>Enabled?}
        G[Execute Phases Sequentially]
        H[Execute Phases in Parallel]
        I[Phase 1: UNDERSTAND]
        J[Phase 2: DECONSTRUCT]
        K[Phase 3: CHALLENGE]
        L[Phase 4: SOLVE]
        M[Phase 5: SYNTHESIZE]
    end

    subgraph AgentFlow["Agent Workflow"]
        N[Load agent.md]
        O[Load Knowledge Files]
        P[Execute Agent Directly]
    end

    subgraph Verification["Verification & Output"]
        Q{Verification Step}
        R[Quality Gates Check]
        S[Auto-Save Session]
        T[Aggregate Results]
        U[Generate Output Artifacts]
        V[End Session]
    end

    subgraph Checkpoints["Observer Control"]
        W{Breakpoint?}
        X[Observer Intervention]
        Y[Continue/Skip/Restart]
    end

    A --> B
    B -->|Team| C
    B -->|Agent| N

    C --> D
    D --> E
    E --> F
    F -->|Yes| H
    F -->|No| G

    G --> I
    I --> W
    W -->|Yes| X
    X --> Y
    Y --> J
    W -->|No| J

    J --> K
    K --> L
    L --> M

    H --> I
    H --> J
    H --> K

    N --> O
    O --> P

    M --> Q
    P --> Q

    Q -->|Pass| R
    Q -->|Fail| L

    R -->|Pass| S
    R -->|Fail| K

    S --> T
    T --> U
    U --> V
