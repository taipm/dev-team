# Create OPPM Workflow
# Guided wizard for creating One-Page Project Management documents

workflow:
  name: create-oppm
  description: Táº¡o OPPM document má»›i vá»›i guided wizard
  version: "1.0"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PHASE 1: PROJECT TYPE SELECTION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
phases:
  - id: type_selection
    name: Chá»n loáº¡i project
    steps:
      - id: 1.1
        action: ask
        question: |
          Báº¡n muá»‘n táº¡o OPPM cho loáº¡i project nÃ o?

          1. ğŸ“± Software Sprint - Agile sprint, user stories, velocity
          2. ğŸ“‹ General Project - Milestones, deliverables, budget
          3. ğŸ”„ Agile/Scrum - Ceremonies, burndown, team health
          4. ğŸ‘¤ Personal - Goals, habits, weekly focus
        output: project_type
        options:
          - "Software Sprint"
          - "General Project"
          - "Agile/Scrum"
          - "Personal"
        validation:
          required: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PHASE 2: BASIC INFO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: basic_info
    name: ThÃ´ng tin cÆ¡ báº£n
    steps:
      - id: 2.1
        action: ask
        question: "TÃªn project/sprint lÃ  gÃ¬?"
        output: project_name
        validation:
          required: true
          max_length: 40

      - id: 2.2
        action: ask
        question: "NgÆ°á»i chá»‹u trÃ¡ch nhiá»‡m (Owner/PM)?"
        output: owner
        validation:
          required: true

      - id: 2.3
        action: ask
        question: "Period (VD: Jan 2026 â†’ Mar 2026, hoáº·c Sprint 1: Jan 6-20)?"
        output: period
        validation:
          required: true

      - id: 2.4
        action: auto
        type: current_date
        output: updated_date

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PHASE 3: OBJECTIVES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: objectives
    name: Thu tháº­p objectives
    steps:
      - id: 3.1
        action: explain
        message: |
          BÃ¢y giá» hÃ£y liá»‡t kÃª 3-5 OBJECTIVES.

          Tips cho objectives tá»‘t:
          - Measurable: cÃ³ sá»‘ liá»‡u cá»¥ thá»ƒ
          - SMART: Specific, Measurable, Achievable, Relevant, Time-bound

          VD: "Reduce page load time to <2s" thay vÃ¬ "Improve performance"

      - id: 3.2
        action: ask
        question: "Objective 1 (required):"
        output: objective_1
        validation:
          required: true

      - id: 3.3
        action: ask
        question: "Objective 2 (required):"
        output: objective_2
        validation:
          required: true

      - id: 3.4
        action: ask
        question: "Objective 3 (required):"
        output: objective_3
        validation:
          required: true

      - id: 3.5
        action: ask
        question: "Objective 4 (optional, Enter Ä‘á»ƒ skip):"
        output: objective_4
        validation:
          required: false

      - id: 3.6
        action: ask
        question: "Objective 5 (optional, Enter Ä‘á»ƒ skip):"
        output: objective_5
        validation:
          required: false

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PHASE 4: TASKS & TIMELINE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: tasks
    name: Thu tháº­p tasks
    steps:
      - id: 4.1
        action: ask
        question: |
          Timeline type:
          1. Days (D1, D2, D3...) - cho sprints ngáº¯n 1-2 tuáº§n
          2. Weeks (W1, W2, W3...) - cho projects 1-3 thÃ¡ng
          3. Months (M1, M2, M3... hoáº·c Jan, Feb...) - cho projects dÃ i
        output: timeline_type
        options:
          - "Days"
          - "Weeks"
          - "Months"
        validation:
          required: true

      - id: 4.2
        action: ask
        question: "Sá»‘ periods (VD: 5 cho 5 tuáº§n, 4 cho 4 thÃ¡ng)?"
        output: period_count
        validation:
          required: true
          type: number
          min: 2
          max: 12

      - id: 4.3
        action: explain
        message: |
          BÃ¢y giá» hÃ£y liá»‡t kÃª TASKS (tá»‘i Ä‘a 15 tasks).

          Format: Task name | Owner | Active periods
          VD: "Implement login | @dev1 | 1-2"

          GÃµ "done" khi hoÃ n thÃ nh.

      - id: 4.4
        action: collect_list
        question: "Task (format: name | @owner | periods):"
        output: tasks
        terminator: "done"
        min_items: 3
        max_items: 15
        parse:
          separator: "|"
          fields: [name, owner, periods]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PHASE 5: STATUS & METRICS (Optional)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: status
    name: Status & Metrics
    condition: project_type != "Personal"
    steps:
      - id: 5.1
        action: ask
        question: |
          Tráº¡ng thÃ¡i hiá»‡n táº¡i:
          1. ğŸŸ¢ On Track
          2. ğŸŸ¡ At Risk
          3. ğŸ”´ Blocked
        output: status
        options:
          - "On Track"
          - "At Risk"
          - "Blocked"

      - id: 5.2
        action: ask
        question: "Budget (VD: $45000 / $60000) - Enter Ä‘á»ƒ skip:"
        output: budget
        validation:
          required: false

      - id: 5.3
        action: ask
        question: "Key risk/blocker (náº¿u cÃ³):"
        output: risk
        validation:
          required: false

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PHASE 6: GENERATE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: generate
    name: Generate OPPM
    steps:
      - id: 6.1
        action: load_template
        template: "../knowledge/02-templates.md"
        select: project_type
        output: template

      - id: 6.2
        action: generate
        type: oppm_document
        inputs:
          - project_name
          - owner
          - period
          - updated_date
          - objectives
          - tasks
          - timeline_type
          - period_count
          - status
          - budget
          - risk
        template: template
        output: oppm_content

      - id: 6.3
        action: display
        content: oppm_content
        message: |
          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
          â•‘  OPPM GENERATED - Xem preview á»Ÿ trÃªn                          â•‘
          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      - id: 6.4
        action: ask
        question: "Báº¡n muá»‘n lÆ°u file nÃ y khÃ´ng? (Nháº­p filename hoáº·c 'no'):"
        output: save_filename
        validation:
          required: true

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PHASE 7: SAVE & EXPORT
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: save
    name: Save & Export
    condition: save_filename != "no"
    steps:
      - id: 7.1
        action: write
        content: oppm_content
        path: "output/oppm/{save_filename}.md"

      - id: 7.2
        action: ask
        question: "Báº¡n muá»‘n export sang PDF khÃ´ng? (yes/no):"
        output: export_pdf
        options:
          - "yes"
          - "no"

      - id: 7.3
        action: display
        condition: export_pdf == "yes"
        template: |
          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
          â•‘  PDF EXPORT INSTRUCTIONS                                       â•‘
          â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
          â•‘                                                                â•‘
          â•‘  Run this command:                                             â•‘
          â•‘                                                                â•‘
          â•‘  pandoc output/oppm/{save_filename}.md \                       â•‘
          â•‘    -o output/oppm/{save_filename}.pdf \                        â•‘
          â•‘    --pdf-engine=xelatex \                                      â•‘
          â•‘    -V geometry:a4paper,landscape \                             â•‘
          â•‘    -V geometry:margin=15mm \                                   â•‘
          â•‘    -V monofont="DejaVu Sans Mono"                              â•‘
          â•‘                                                                â•‘
          â•‘  Or use: /microai:one-page *export                             â•‘
          â•‘                                                                â•‘
          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# COMPLETION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: complete
    name: Complete
    steps:
      - id: 8.1
        action: display
        template: |
          â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
          â•‘  âœ… OPPM CREATED SUCCESSFULLY                                  â•‘
          â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
          â•‘                                                                â•‘
          â•‘  Project: {project_name}                                       â•‘
          â•‘  Type: {project_type}                                          â•‘
          â•‘  File: output/oppm/{save_filename}.md                          â•‘
          â•‘                                                                â•‘
          â•‘  Commands:                                                     â•‘
          â•‘    *update  - Update this OPPM                                 â•‘
          â•‘    *export  - Export to PDF                                    â•‘
          â•‘    *create  - Create another OPPM                              â•‘
          â•‘                                                                â•‘
          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ERROR HANDLING
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
error_handling:
  on_validation_error:
    action: retry
    message: "Input khÃ´ng há»£p lá»‡. Vui lÃ²ng thá»­ láº¡i."
    max_retries: 3

  on_cancel:
    action: abort
    message: "ÄÃ£ há»§y táº¡o OPPM."
